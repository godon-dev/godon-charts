---

########################################
## Component | Godon Seeder Job
########################################
godon_seeder:
  image:
    tag: "0.0.18"
  env:
  - name: CONTROLLER_VERSION
    value: "0.9.0"
  - name: BREEDER_VERSION
    value: "0.7.0"
  - name: WINDMILL_BASE_URL
    value: "http://windmill-app.godon.svc.cluster.local:8000/api"

########################################
## Component | Windmill Workflow Orchestration Engine
########################################
windmill:
  windmill:
    tag: "1.601.1"
    lspReplicas: 0
    workerGroups:
      - name: "default"
        replicas: 1
        extraEnv:
        - name: WHITELIST_ENVS
          value: "GODON_API_SERVICE_PORT,GODON_METADATA_DB_SERVICE_PORT,YB_TSERVER_SERVICE_SERVICE_PORT,GODON_API_SERVICE_HOST,GODON_METADATA_DB_SERVICE_HOST,YB_TSERVER_SERVICE_SERVICE_HOST,YB_TSERVER_SERVICE_SERVICE_PORT_TCP_YSQL_PORT"
  postgresql:
    image:
      repository: postgres
      tag: "14"

########################################
## Component | Godon API
########################################
api:
  image:
    repository: "ghcr.io/godon-dev/godon-api"
    tag: "0.0.12"
  env:
  - name: WINDMILL_BASE_URL
    value: "http://windmill-app.godon.svc.cluster.local:8000/api"

########################################
## Component | Knowledge Archive Database for Cooperating Config Breeders
########################################
archive-db:
  enabled: true
  # Skip disk I/O health checks for KIND environment (slow disk sync causes timeouts)
  # This skips only the /mnt/disk write/sync probes, keeps other monitoring
  Values:
    Services:
    - name: "yb-masters"
      skipHealthChecks: true
    - name: "yb-tservers"
      skipHealthChecks: true

########################################
## Component | Godon Metrics Exporter
########################################
metrics_exporter:
  env:
  - name: ARCHIVE_DB_HOST
    value: "yb-tservers.archive-db.svc.cluster.local:5433"
  - name: ARCHIVE_DB_USER
    value: "yugabyte"
  - name: ARCHIVE_DB_PW
    value: "yugabyte"
  - name: ARCHIVE_DB_DATABASE_NAME
    value: "archive_db"
